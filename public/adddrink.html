<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="/vendors/bootstrap/css/bootstrap.css" />
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.17/dist/sweetalert2.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.17/dist/sweetalert2.all.min.js"></script>
  <title>Order Custom Drink | Coffee Stop by Team 20</title>
</head>
<style>
  h1 {
    margin-top: 1.5rem;
    font-size: 2.0rem;
    font-weight: bold;
  }
  h4 {
    font-family:'Avenir', sans-serif;
  }
  
  .card-title {
    font-weight: bold;
  }

  p {
    font-family:'Avenir', sans-serif;
    font-weight: light;
    font-size: medium;
  }

  .btn-submit {
    background-color: var(--secondary);
    color: var(--accent);
    font-family:'Avenir', sans-serif;
  }

  .btn-cancel {
    background-color: white;
    color: var(--primary);
    border-color: var(--primary);
    font-family:'Avenir', sans-serif;
  }

</style>
<body>
  <header>
    <nav class="navbar sticky-top navbar-expand-md navbar-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="/home">
          <img src="/../images/coffee.png" width="30" height="30" alt="">
        </a>
        <button class="navbar-toggler" style="background-color: var(--secondary)" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" style="color: var(--accent); font-family:'Avenir', sans-serif;" href="/customdrink">Custom Drink</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" style="color: var(--accent); font-family:'Avenir', sans-serif;" href="/history">Cafe History</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" style="color: var(--accent); font-family:'Avenir', sans-serif;" href="/map">Map</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" style="color: var(--accent); font-family:'Avenir', sans-serif;" href="/">Log Out</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </header>
  <main>
    <div class="container">
        <h1>Add a New Drink</h1>
        <form>
          <div class="form-group">
            <label for="drinkName">Drink Name</label>
            <input type="text" class="form-control" id="drinkName" placeholder="Enter drink name" style="font-family:'Avenir', sans-serif;">
          </div>
          <div class="form-group">
            <label for="drinkLocation">Location</label>
            <input type="text" class="form-control" id="drinkLocation" placeholder="Enter location" style="font-family:'Avenir', sans-serif;">
          </div>
          <div class="form-group">
            <label for="drinkTemperature">Temperature</label>
            <select class="form-control" id="drinkTemperature" style="font-family:'Avenir', sans-serif;">
              <option>Extra Ice</option>
              <option>Normal Ice</option>
              <option>Lite Ice</option>
              <option>Hot</option>
              <option>Extra Hot</option>
            </select>
          </div>
          <div class="form-group">
            <label for="drinkMilk">Milk</label>
            <select class="form-control" id="drinkMilk" style="font-family:'Avenir', sans-serif;">
              <option>Oat Milk</option>
              <option>Dairy</option>
              <option>Almond Milk</option>
              <option>No Milk</option>
            </select>
          </div>
          <div class="form-group">
            <label for="drinkSugar">Sugar</label>
            <select class="form-control" id="drinkSugar" style="font-family:'Avenir', sans-serif;">
              <option>1 Spoon</option>
              <option>2 Spoons</option>
              <option>3 Spoons</option>
              <option>None</option>
            </select>
          </div>
          <div class="form-group">
            <label for="drinkSyrup">Syrup</label>
            <select class="form-control" id="drinkSyrup" style="font-family:'Avenir', sans-serif;">
              <option>No Syrup</option>
              <option>Vanilla Syrup</option>
              <option>Caramel Syrup</option>
              <option>Hazelnut Syrup</option>
            </select>
          </div>
          <div class="form-group">
            <label for="syrupPumps">Number of Syrup Pumps</label>
            <input type="number" class="form-control" id="syrupPumps" placeholder="Enter number of syrup pumps" style="font-family:'Avenir', sans-serif;">
          </div>
          <a onclick="addCustomDrink(event)" class="btn btn-submit mb-4 mt-1" style="color: var(--accent)">Submit</a>
          <a href="/customdrink" class="btn btn-cancel mb-4 mt-1">Cancel</a>
        </form>
      </div>
  </main>
  <script>
    
    function addCustomDrink(event) {
      event.preventDefault(); // Prevent the form from submitting to a server and refreshing the page

      const name = document.getElementById('drinkName').value;
      const location = document.getElementById('drinkLocation').value;
      const temperature = document.getElementById('drinkTemperature').value;
      const milk = document.getElementById('drinkMilk').value;
      const sugar = document.getElementById('drinkSugar').value;
      const syrup = document.getElementById('drinkSyrup').value;
      const syrupPumps = document.getElementById('syrupPumps').value;
      const description = "";
      const rating = 0;

      // Ensure that required fields are filled out
      if (!name || !location || !temperature || !milk || !sugar || !syrup || !syrupPumps) {
        Swal.fire({
          icon: 'error',
          title: 'Oops...',
          text: 'Please fill out all of the fields!',
          confirmButtonColor: '#9C6615',
          confirmButtonText: 'OK'
        })
        return;
      }

      // Ensure that syrup pumps is a positive integer
      if (syrupPumps < 0 || !Number.isInteger(parseInt(syrupPumps))) {
        Swal.fire({
          icon: 'error',
          title: 'Oops...',
          text: 'Please enter a valid number of syrup pumps!',
          confirmButtonColor: '#9C6615',
          confirmButtonText: 'OK'
        })
        return;
      }

      // Increment the number of drinks stored in local storage
      let numDrinks = parseInt(localStorage.getItem('numDrinks')) || 0;
      numDrinks++;
      localStorage.setItem('numDrinks', numDrinks);

      // Store the custom drink data in local storage
      const customDrinkData = JSON.stringify({
        id: numDrinks.toString(),
        name,
        location,
        temperature,
        milk,
        sugar,
        syrup,
        syrupPumps,
        description,
        rating
      });

      let customDrinks = JSON.parse(localStorage.getItem('customDrinks')) || [];
      customDrinks.push(customDrinkData);
      localStorage.setItem('customDrinks', JSON.stringify(customDrinks));

      // Navigate to the other page
      window.location.href = '/customdrink';
    }


    
  </script>
  <script src="/vendors/jquery/jquery-3.3.1.min.js"></script>
  <script src="/vendors/jquery-ui/jquery-ui.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="/vendors/bootstrap/js/bootstrap.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.17/dist/sweetalert2.all.min.js"></script>
</body>
</html>
